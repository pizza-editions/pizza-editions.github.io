var e=!1;function t(){let t=document.getElementById("game-area");e?(e=!1,n()?(t.style.position="absolute",document.getElementById("mobile-back-button").style.display="none",document.getElementById("game-player").style.display="none"):t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()):(e=!0,n()?(document.getElementById("game-player").style.display="block",t.style.position="fixed",document.getElementById("mobile-back-button").style.display="flex"):t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen())}function n(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}$("iframe#game-area").length&&(function(){if($("#content-leaderboard").length){let e=$("#content-leaderboard").data("id");$.ajax({url:"/includes/api.php",type:"POST",dataType:"json",data:{action:"get_scoreboard","game-id":e,conf:JSON.stringify({type:"top",amount:10})},complete:function(e){e.responseText&&JSON.parse(e.responseText).length&&function(e){let t='<table class="table table-striped table-dark"><thead class="thead-dark"><tr><th scope="col">#</th><th scope="col">Username</th><th scope="col">Score</th><th scope="col">Date</th></tr></thead><tbody>',n=1;e.forEach((e=>{t+='<tr><th scope="row">'+n+"</th><td>"+e.username+"</td><td>"+e.score+"</td><td>"+e.created_date.substr(0,10)+"</td></tr>",n++})),t+="</tbody></table>",$("#content-leaderboard").html(t)}(JSON.parse(e.responseText))}})}}(),function(e){let n=!1,o=0,a=0,l=e.style.top,s=0;e.addEventListener("touchend",(function(e){n&&(n=!1)}),!1),e.addEventListener("touchmove",(function(t){t.preventDefault();let l=t.changedTouches[0];n||(s<l.clientY+5||s>l.clientY-5)&&(a=t.clientY,n=!0),n&&(o=a-l.clientY,a=l.clientY,e.style.top=a+"px")}),!1),e.addEventListener("touchstart",(function(t){let n=t.changedTouches[0];l=e.style.top,s=n.clientY}),!1),e.addEventListener("click",(function(n){n.preventDefault(),l==e.style.top&&t()}),!1)}(document.getElementById("mobile-back-button")),n()&&$("#allow_mobile_version").length&&(document.getElementById("mobile-play").style.display="block",document.getElementById("game-player").style.display="none")),function(){let e,n=$("#new-games-section").children().length;$("#load-more1").click((e=>{e.preventDefault(),$(this).addClass("disabled"),$.ajax({url:"/includes/fetch.php",type:"POST",dataType:"json",data:{amount:12,offset:n,sort_by:"new"},complete:function(e){!function(e){n+=e.length,e.forEach((e=>{let t=0;e.upvote=Number(e.upvote),e.downvote=Number(e.downvote),e.upvote+e.downvote>0&&Math.round(e.upvote/(e.upvote+e.downvote)*5);let n='<div class="col-md-2 col-sm-3 col-4 grid-1">';n+='<a href="/game/'+e.slug+'/">',n+='<div class="game-item">',n+='<div class="list-game">',n+='<div class="list-thumbnail"><img src="'+e.thumb_2+'" class="small-thumb img-rounded" alt="'+e.title+'"></div>',n+='<div class="list-info">',n+='<div class="list-title">'+e.title+"</div>",n+="</div></div></div></a></div>",$("#new-games-section").append(n),$("#new-games-section .column:hidden").slice(0,12).slideDown()})),e.length<12?$("#load-more1").text("No More Games").addClass("noContent disabled"):$("#load-more1").removeClass("disabled")}(JSON.parse(e.responseText))}})})),$("#mobile-play-btn").on("click",(function(e){t()})),$(".b-action #favorite").on("click",(function(e){e.preventDefault();let t=$(".game-content").attr("data-id"),n=$(this);$.ajax({url:"/includes/vote.php",type:"POST",dataType:"json",data:{favorite:!0,action:"favorite",id:t},success:function(e){},error:function(e){},complete:function(e){console.log(e.responseText),n.addClass("active"),n.addClass("disabled")}})})),$(".b-action #upvote").on("click",(function(e){e.preventDefault();let t=$(".game-content").attr("data-id"),n=$(this);$.ajax({url:"/includes/vote.php",type:"POST",dataType:"json",data:{vote:!0,action:"upvote",id:t},success:function(e){},error:function(e){},complete:function(e){console.log(e.responseText),n.addClass("active"),n.addClass("disabled")}})})),$(".b-action #downvote").on("click",(function(e){e.preventDefault();let t=$(".game-content").attr("data-id"),n=$(this);$.ajax({url:"/includes/vote.php",type:"POST",dataType:"json",data:{vote:!0,action:"downvote",id:t},success:function(e){},error:function(e){},complete:function(e){console.log(e.responseText),n.addClass("active"),n.addClass("disabled")}})})),$(".user-avatar").on("click",(function(){let e=$(this).next();e.is(":hidden")?e.removeClass("hidden"):e.addClass("hidden")})),$("#btn_prev").on("click",(function(){$(".profile-gamelist ul").animate({scrollLeft:"-=150"},300,"swing")})),$("#btn_next").on("click",(function(){$(".profile-gamelist ul").animate({scrollLeft:"+=150"},300,"swing")})),$("#f_prev").on("click",(function(){$(".favorite-gamelist ul").animate({scrollLeft:"-=150"},300,"swing")})),$("#f_next").on("click",(function(){$(".favorite-gamelist ul").animate({scrollLeft:"+=150"},300,"swing")})),$("#t-prev").on("click",(function(){$(".list-1-wrapper").animate({scrollLeft:"-=150"},300,"swing")})),$("#t-next").on("click",(function(){$(".list-1-wrapper").animate({scrollLeft:"+=150"},300,"swing")})),$(".delete-comment").on("click",(function(){let e=$(this).attr("data-id");$.ajax({url:"/includes/comment.php",type:"POST",dataType:"json",data:{delete:!0,id:e},success:function(e){},error:function(e){},complete:function(t){"deleted"===t.responseText&&$(".id-"+e).remove()}},this)})),$("#comments").length&&(e=$(".game-content").attr("data-id"),$.ajax({url:"/includes/comment.php",type:"POST",dataType:"json",data:{load:!0,game_id:e},success:function(e){},error:function(e){},complete:function(t){!function(t){let n=!1,o=$(".user-avatar img").attr("src");o||(o="/images/default_profile.png",n=!0),$("#comments").comments({enableUpvoting:!1,roundProfilePictures:!0,popularText:"",profilePictureURL:o,readOnly:n,getComments:function(e,n){e(t)},postComment:function(t,n,o){t.source="jquery-comments",t.send=!0,t.game_id=e,$.ajax({type:"post",url:"/includes/comment.php",data:t,success:function(e){console.log(e),n(t)},error:o})}})}(function(e){let t=[];return e.forEach((e=>{let n={id:Number(e.id),created:e.created_date,content:e.comment,fullname:e.sender_username,profile_picture_url:e.avatar};Number(e.parent_id)&&(n.parent=Number(e.parent_id)),n.fullname||(n.fullname="Anonymous"),t.push(n)})),t}(JSON.parse(t.responseText)))}}))}(),document.addEventListener("DOMContentLoaded",(function(){let e=[],t=!1;fetch("/games.json").then((e=>{if(!e.ok)throw new Error("Network error");return e.json()})).then((n=>{e=n,t=!0})).catch((e=>{console.error("Fetch error:",e),document.getElementById("gameList").innerHTML="<p>Error loading games</p>"})),document.getElementById("gameSearch").addEventListener("input",(function(){const n=this.value.trim().toLowerCase(),o=document.getElementById("gameList");if(o.innerHTML="",o.style.display="block",!n)return void(o.style.display="none");if(!t)return void(o.innerHTML="<p>Loading games...</p>");const a=e.filter((e=>e.name.toLowerCase().startsWith(n)));a.length>0?a.forEach((e=>{const t=document.createElement("div");t.className="game-item",t.innerHTML=`<a href="../${e.url}">${e.name}</a>`,o.appendChild(t)})):o.innerHTML="<p>No results found</p>"})),document.addEventListener("click",(function(e){e.target.closest("#gameSearch, #gameList")||(document.getElementById("gameList").style.display="none")}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".list-thumbnail").forEach((e=>{const t=e.querySelector("img");if(t&&t.alt){const n=document.createElement("div");n.className="tooltip",n.textContent=t.alt,e.appendChild(n)}}))}));// ...existing code...
function open_fullscreen() {
    var iframe = document.getElementById('game-area');
    if (iframe.requestFullscreen) {
        iframe.requestFullscreen();
    } else if (iframe.mozRequestFullScreen) { // Firefox
        iframe.mozRequestFullScreen();
    } else if (iframe.webkitRequestFullscreen) { // Chrome, Safari and Opera
        iframe.webkitRequestFullscreen();
    } else if (iframe.msRequestFullscreen) { // IE/Edge
        iframe.msRequestFullscreen();
    }
}